<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="stylesheet" href="../style.css" />
    <title>My Account - CITY STYLE</title>
</head>

<body class="profile-page">
    <nav>
        <div class="nav__header">
            <div class="nav__logo">
                <a href="../index.html">CITY STYLE</a>
            </div>
        </div>
        <div class="nav__actions">
            <div class="theme-toggle" id="theme-toggle"
                style="margin-right: 1rem; cursor: pointer; color: var(--white); font-size: 1.2rem;">
                <i class="ri-moon-line"></i>
            </div>
            <a href="../index.html" class="nav__btn"
                style="background: transparent; border: 1px solid var(--white); color: var(--white);">Back to Shop</a>
        </div>
    </nav>

    <div class="fashion-profile-container">
        <!-- Sidebar / User Info -->
        <aside class="profile-sidebar">
            <div class="profile-card">
                <div class="profile-avatar-large" id="profile-avatar">U</div>

                <div class="profile-name-wrapper">
                    <h2 class="profile-name" id="profile-name">User Name</h2>
                    <div class="edit-icon" id="edit-profile-icon" title="Edit Name">
                        <i class="ri-pencil-line"></i>
                    </div>
                </div>

                <p class="profile-email" id="profile-email">user@example.com</p>
                <div class="profile-divider"></div>
                <p class="welcome-msg">"Welcome back, <span id="welcome-name">Fashionista</span> ðŸ’–"</p>

                <button id="logout-btn" class="btn-logout">
                    <i class="ri-logout-box-r-line"></i> Log Out
                </button>
            </div>
        </aside>

        <!-- Main Content / Orders -->
        <main class="profile-content">
            <div class="content-header">
                <h3>Your Wardrobe History</h3>
                <p>Track your recent fashion acquisitions</p>
            </div>

            <div class="order-history-list">
                <!-- Mock Order 1 -->
                <div class="fashion-order-card">
                    <div class="order-image">
                        <img src="../assets/hoodie.jpg" alt="Hoodie" />
                    </div>
                    <div class="order-info">
                        <h4>Urban Hoodie</h4>
                        <p class="order-meta">Order #CS-8832 â€¢ Jan 15, 2024</p>
                    </div>
                    <div class="order-status status-delivered">Delivered</div>
                    <div class="order-price">$45.00</div>
                </div>

                <!-- Mock Order 2 -->
                <div class="fashion-order-card">
                    <div class="order-image">
                        <img src="../assets/arrival-2.jpg" alt="Coat" />
                    </div>
                    <div class="order-info">
                        <h4>Winter Parka</h4>
                        <p class="order-meta">Order #CS-9921 â€¢ Feb 02, 2024</p>
                    </div>
                    <div class="order-status status-shipped">Shipped</div>
                    <div class="order-price">$120.00</div>
                </div>

                <!-- Mock Order 3 -->
                <div class="fashion-order-card">
                    <div class="order-image">
                        <img src="../assets/OVRSIZED.webp" alt="T-Shirt" />
                    </div>
                    <div class="order-info">
                        <h4>Oversized Tee</h4>
                        <p class="order-meta">Order #CS-9945 â€¢ Feb 05, 2024</p>
                    </div>
                    <div class="order-status status-processing">Processing</div>
                    <div class="order-price">$35.00</div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer>
        <div class="section__container footer__container">
            <div class="footer__col">
                <p>Complete your style with awesome clothes from us.</p>
            </div>
            <div class="footer__bar">
                Copyright Â© Bodhisatwa Dutta 2024.
            </div>
        </div>
    </footer>

    <script>
        // Auth & Data Logic
        let currentUser = localStorage.getItem("currentUser");

        // Auth Guard
        if (!currentUser) {
            window.location.href = "auth.html";
        }

        // Populate Data Function
        const updateProfileUI = (name) => {
            if (!name) return;
            const initial = name.charAt(0).toUpperCase();

            document.getElementById("profile-name").textContent = name;
            document.getElementById("welcome-name").textContent = name;
            document.getElementById("profile-avatar").textContent = initial;
            document.getElementById("profile-email").textContent = `${name.toLowerCase().replace(/\s/g, '')}@citystyle.com`;
        }

        // Initial Load
        if (currentUser) {
            updateProfileUI(currentUser);
        }

        // Logout Function
        document.getElementById("logout-btn").addEventListener("click", () => {
            localStorage.removeItem("currentUser");
            window.location.href = "../index.html";
        });

        // Edit Profile Functionality
        const editIcon = document.getElementById("edit-profile-icon");
        if (editIcon) {
            editIcon.addEventListener("click", () => {
                const newName = prompt("Enter your new profile name:", currentUser);
                if (newName && newName.trim() !== "") {
                    // Update LocalStorage
                    localStorage.setItem("currentUser", newName.trim());
                    // Update Variable
                    currentUser = newName.trim();
                    // Update UI
                    updateProfileUI(currentUser);
                }
            });
        }
        /* --- Dark Mode Logic --- */
        const themeToggle = document.getElementById("theme-toggle");
        const themeIcon = themeToggle ? themeToggle.querySelector("i") : null;

        // Function to apply theme
        const applyTheme = (isDark) => {
            if (isDark) {
                document.body.classList.add("dark-theme");
                if (themeIcon) themeIcon.setAttribute("class", "ri-sun-line");
            } else {
                document.body.classList.remove("dark-theme");
                if (themeIcon) themeIcon.setAttribute("class", "ri-moon-line");
            }
        }

        // Check local storage on load
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
            applyTheme(true);
        }

        // Toggle Event Listener
        if (themeToggle) {
            themeToggle.addEventListener("click", () => {
                const isDark = !document.body.classList.contains("dark-theme");
                applyTheme(isDark);
                localStorage.setItem("theme", isDark ? "dark" : "light");
            });
        }
    </script>
</body>

</html>